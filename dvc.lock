schema: '2.0'
stages:
  split_data:
    cmd: python src/features/split_data.py
    deps:
    - path: data/raw/accepted_2007_to_2018Q4.csv
      md5: 40d0463a883c602e3732b5f821a3dac7
      size: 1675133810
    - path: src/features/split_data.py
      md5: 9fc5f8def7fd8f728baf1b14c7061aa8
      size: 1308
    outs:
    - path: data/interim/test_raw.csv
      md5: fb79a5dc2191f6b697be6b00b2ff66c9
      size: 198194262
    - path: data/interim/train_raw.csv
      md5: f0224d40670d7e39726891f26da5d4fe
      size: 792688625
  clean_data:
    cmd: python src/features/clean_data.py
    deps:
    - path: data/interim/test_raw.csv
      md5: fb79a5dc2191f6b697be6b00b2ff66c9
      size: 198194262
    - path: data/interim/train_raw.csv
      md5: f0224d40670d7e39726891f26da5d4fe
      size: 792688625
    - path: src/features/clean_data.py
      md5: fff75106be6d0b4a38781fbc50674472
      size: 4656
    outs:
    - path: data/interim/test_clean.csv
      md5: 3919508089f4ac2d721add20db0b2116
      size: 140510737
    - path: data/interim/train_clean.csv
      md5: 424716ffaaae0d6b63b8e1cab5b7832a
      size: 562009103
  encode_features:
    cmd: python src/features/encode_features.py
    deps:
    - path: data/interim/test_clean.csv
      md5: 3919508089f4ac2d721add20db0b2116
      size: 140510737
    - path: data/interim/train_clean.csv
      md5: 424716ffaaae0d6b63b8e1cab5b7832a
      size: 562009103
    - path: src/features/encode_features.py
      md5: ab73830121aff7e5b63b7a1fe9b29712
      size: 2233
    outs:
    - path: data/processed/X_test.npy
      md5: c8eb64ff52b452ca67a27b3d843f6442
      size: 378220664
    - path: data/processed/X_train.npy
      md5: 9f37f27609e6dc55872735b0519508f0
      size: 1512880904
    - path: data/processed/y_test.npy
      md5: b7728573eb3db9d255d5f578541f3f36
      size: 2211944
    - path: data/processed/y_train.npy
      md5: 635027b569a6bd54bfc25707ef2ee8f9
      size: 8847384
    - path: models/columns_encoder.pkl
      md5: 82834c4134cb61a686f35506dc75b99e
      size: 6121
  train_decision_tree:
    cmd: python src/models/training/train_decision_tree.py
    deps:
    - path: data/processed/X_train.npy
      md5: 9f37f27609e6dc55872735b0519508f0
      size: 1512880904
    - path: data/processed/y_train.npy
      md5: 635027b569a6bd54bfc25707ef2ee8f9
      size: 8847384
    outs:
    - path: models/decision_tree.pkl
      md5: 9151cd9e93c3ea6ba9dae6a28df01b13
      size: 516929
  train_log_reg_rf_select:
    cmd: python src/training/train_log_reg_rf_select.py --random-state=1
    deps:
    - path: data/processed/X_train.npy
      md5: 9f37f27609e6dc55872735b0519508f0
      size: 1512880904
    - path: data/processed/y_train.npy
      md5: 635027b569a6bd54bfc25707ef2ee8f9
      size: 8847384
    outs:
    - path: models/log_reg_rf_select.pkl
      md5: c325fe9c1fec6206bcbf4e78d1074461
      size: 131012
  train_xgboost:
    cmd: python src/models/training/train_xgboost.py
    deps:
    - path: data/processed/X_train.npy
      md5: 9f37f27609e6dc55872735b0519508f0
      size: 1512880904
    - path: data/processed/y_train.npy
      md5: 635027b569a6bd54bfc25707ef2ee8f9
      size: 8847384
    outs:
    - path: models/xgboost.pkl
      md5: 0862814de64215c83ec2370021032f2d
      size: 339419
  train_log_reg_full:
    cmd: python src/models/training/train_log_reg_full.py
    deps:
    - path: data/processed/X_train.npy
      md5: 9f37f27609e6dc55872735b0519508f0
      size: 1512880904
    - path: data/processed/y_train.npy
      md5: 635027b569a6bd54bfc25707ef2ee8f9
      size: 8847384
    outs:
    - path: models/log_reg_full.pkl
      md5: b8861f007ff9f28e2e2c7b734bfb785f
      size: 2045
  evaluate_log_reg_full:
    cmd: python src/models/evaluation/evaluate_model.py  --metrics-file=./metrics/log_reg_full.json
      --model-file=./models/log_reg_full.pkl
    deps:
    - path: data/processed/X_test.npy
      md5: c8eb64ff52b452ca67a27b3d843f6442
      size: 378220664
    - path: data/processed/y_test.npy
      md5: b7728573eb3db9d255d5f578541f3f36
      size: 2211944
    - path: models/log_reg_full.pkl
      md5: b8861f007ff9f28e2e2c7b734bfb785f
      size: 2045
    outs:
    - path: ./metrics/log_reg_full.json
      md5: 8b531b9f46fabf69cff3a077ff67a077
      size: 129
  evaluate_xgboost:
    cmd: python src/models/evaluation/evaluate_model.py  --metrics-file=./metrics/xgboost.json
      --model-file=./models/xgboost.pkl
    deps:
    - path: data/processed/X_test.npy
      md5: c8eb64ff52b452ca67a27b3d843f6442
      size: 378220664
    - path: data/processed/y_test.npy
      md5: b7728573eb3db9d255d5f578541f3f36
      size: 2211944
    - path: models/xgboost.pkl
      md5: 0862814de64215c83ec2370021032f2d
      size: 339419
    outs:
    - path: ./metrics/xgboost.json
      md5: 5eac65fcc7aea68201853f60299bf93a
      size: 127
  train@log_reg_full:
    cmd: python src/training/train_log_reg_full.py --random-state=1
    deps:
    - path: data/processed/X_train.npy
      md5: 9f37f27609e6dc55872735b0519508f0
      size: 1512880904
    - path: data/processed/y_train.npy
      md5: 635027b569a6bd54bfc25707ef2ee8f9
      size: 8847384
    outs:
    - path: models/log_reg_full/rs_1.pkl
      md5: 9e8b3a92ae78d6cc78c84b4e15deb7f2
      size: 2046
  evaluate@log_reg_full:
    cmd: python src/evaluation/evaluate_model.py  --metrics-file=./metrics/log_reg_full/rs_1.json
      --model-file=./models/log_reg_full/rs_1.pkl
    deps:
    - path: data/processed/X_test.npy
      md5: c8eb64ff52b452ca67a27b3d843f6442
      size: 378220664
    - path: data/processed/y_test.npy
      md5: b7728573eb3db9d255d5f578541f3f36
      size: 2211944
    - path: models/log_reg_full/rs_1.pkl
      md5: 9e8b3a92ae78d6cc78c84b4e15deb7f2
      size: 2046
    outs:
    - path: ./metrics/log_reg_full/rs_1.json
      md5: 8b531b9f46fabf69cff3a077ff67a077
      size: 129
  train@decision_tree:
    cmd: python src/training/train_decision_tree.py --random-state=1
    deps:
    - path: data/processed/X_train.npy
      md5: 9f37f27609e6dc55872735b0519508f0
      size: 1512880904
    - path: data/processed/y_train.npy
      md5: 635027b569a6bd54bfc25707ef2ee8f9
      size: 8847384
    outs:
    - path: models/decision_tree/rs_1.pkl
      md5: ed52ce8fdf28ea1a1ffd24d64055f960
      size: 516066
  evaluate@decision_tree:
    cmd: python src/evaluation/evaluate_model.py  --metrics-file=./metrics/decision_tree/rs_1.json
      --model-file=./models/decision_tree/rs_1.pkl
    deps:
    - path: data/processed/X_test.npy
      md5: c8eb64ff52b452ca67a27b3d843f6442
      size: 378220664
    - path: data/processed/y_test.npy
      md5: b7728573eb3db9d255d5f578541f3f36
      size: 2211944
    - path: models/decision_tree/rs_1.pkl
      md5: ed52ce8fdf28ea1a1ffd24d64055f960
      size: 516066
    outs:
    - path: ./metrics/decision_tree/rs_1.json
      md5: 15d3ea6fd0be27c2dbaafae860c9fe78
      size: 127
  train@xgboost:
    cmd: python src/training/train_xgboost.py --random-state=1
    deps:
    - path: data/processed/X_train.npy
      md5: 9f37f27609e6dc55872735b0519508f0
      size: 1512880904
    - path: data/processed/y_train.npy
      md5: 635027b569a6bd54bfc25707ef2ee8f9
      size: 8847384
    outs:
    - path: models/xgboost/rs_1.pkl
      md5: 16580225c536ec9b5d3fc0e65eb104fa
      size: 339440
  evaluate@xgboost:
    cmd: python src/evaluation/evaluate_model.py  --metrics-file=./metrics/xgboost/rs_1.json
      --model-file=./models/xgboost/rs_1.pkl
    deps:
    - path: data/processed/X_test.npy
      md5: c8eb64ff52b452ca67a27b3d843f6442
      size: 378220664
    - path: data/processed/y_test.npy
      md5: b7728573eb3db9d255d5f578541f3f36
      size: 2211944
    - path: models/xgboost/rs_1.pkl
      md5: 16580225c536ec9b5d3fc0e65eb104fa
      size: 339440
    outs:
    - path: ./metrics/xgboost/rs_1.json
      md5: 5eac65fcc7aea68201853f60299bf93a
      size: 127
  evaluate@log_reg_rf_select:
    cmd: python src/evaluation/evaluate_model.py  --metrics-file=./metrics/log_reg_rf_select/rs_1.json
      --model-file=./models/log_reg_rf_select/rs_1.pkl
    deps:
    - path: data/processed/X_test.npy
      md5: c8eb64ff52b452ca67a27b3d843f6442
      size: 378220664
    - path: data/processed/y_test.npy
      md5: b7728573eb3db9d255d5f578541f3f36
      size: 2211944
    - path: models/log_reg_rf_select/rs_1.pkl
      md5: c325fe9c1fec6206bcbf4e78d1074461
      size: 131012
    outs:
    - path: ./metrics/log_reg_rf_select/rs_1.json
      md5: fe84c6d3ee73795c5cc97b562b6b74ab
      size: 129
  train@log_reg_rf_select:
    cmd: python src/training/train_log_reg_rf_select.py --random-state=1
    deps:
    - path: data/processed/X_train.npy
      md5: 9f37f27609e6dc55872735b0519508f0
      size: 1512880904
    - path: data/processed/y_train.npy
      md5: 635027b569a6bd54bfc25707ef2ee8f9
      size: 8847384
    outs:
    - path: models/log_reg_rf_select/rs_1.pkl
      md5: c325fe9c1fec6206bcbf4e78d1074461
      size: 131012
